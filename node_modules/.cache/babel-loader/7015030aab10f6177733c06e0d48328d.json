{"ast":null,"code":"var _jsxFileName = \"/Users/ramsses/Downloads/test/tasks/src/pages/Graphic.js\";\nimport React, { Component } from 'react';\nimport { Container, Badge, Row, Col } from 'react-bootstrap';\nimport { IoMdArrowRoundBack as BackIcon } from 'react-icons/io';\nimport { NavLink } from 'react-router-dom';\nimport { getTasksFiltered } from '../services/getTasksFiltered';\nimport GraphicDraw from '../components/GraphicDraw';\nimport './css/Dashboard.css';\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tasks: []\n    };\n    this.mountedComponent = false;\n  }\n\n  async componentDidMount() {\n    this.mountedComponent = true;\n    const lastWeekDates = this.lastWeekDates();\n    const tasksFilteredResults = await getTasksFiltered({\n      field: 'finished_time',\n      range: [lastWeekDates.startDate, lastWeekDates.endDate],\n      query: {}\n    });\n\n    if (!tasksFilteredResults.error) {\n      this.setState({ ...this.state,\n        tasks: tasksFilteredResults.data\n      });\n    }\n  }\n\n  lastWeekDates() {\n    // fecha actual\n    const today = new Date(); // dia de la semana extraida del objeto Date [Domingo(0) - lunes(6)]\n\n    const day = new Date().getDay() + 2; // calculo cuantos dias quitarle a esta semana\n\n    const days = day > 7 ? 1 : day; // calculo el viernes de la semana anterior\n\n    const oneDayTime = 1000 * 60 * 60 * 24;\n    const twelveHours = 1000 * 60 * 60 * 12; // le sumo 6 hora para comparar en la base de datos con UTC\n\n    const endDate = new Date(today - (oneDayTime - twelveHours) * days); // calculu su lunes\n\n    const startDate = new Date(endDate - (oneDayTime + twelveHours) * 4);\n    return {\n      startDate,\n      endDate\n    };\n  }\n\n  componentWillUnmount() {\n    this.mountedComponent = false;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      style: {\n        backgroundColor: '#333'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: {\n        pathname: '/'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(BackIcon, {\n      style: {\n        color: 'white',\n        fontSize: '30px',\n        margin: '7px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        textAlign: 'center',\n        padding: '3px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, \"Tareas de la ultima semana\")), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      style: {\n        textAlign: 'center',\n        padding: '3px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      style: {\n        backgroundColor: 'teal',\n        color: 'white',\n        margin: '3px 0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      style: {\n        textAlign: 'center',\n        padding: '5px',\n        margin: '0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, \"Tareas completadas\")), ' ', /*#__PURE__*/React.createElement(Badge, {\n      style: {\n        backgroundColor: 'lightcoral',\n        color: 'white',\n        margin: '3px 0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      style: {\n        textAlign: 'center',\n        padding: '5px',\n        margin: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, \"Total de tareas completadas restantes\")), ' ')), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: {\n        span: 10,\n        offset: 1\n      },\n      sm: {\n        span: 8,\n        offset: 2\n      },\n      md: {\n        span: 6,\n        offset: 3\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, this.state.tasks.length > 0 && /*#__PURE__*/React.createElement(GraphicDraw, {\n      tasks: this.state.tasks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }), this.state.tasks.length < 1 && /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        textAlign: 'center',\n        padding: '3px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, \"No hay tareas terminadas en la ultima semana\")))));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/ramsses/Downloads/test/tasks/src/pages/Graphic.js"],"names":["React","Component","Container","Badge","Row","Col","IoMdArrowRoundBack","BackIcon","NavLink","getTasksFiltered","GraphicDraw","Dashboard","constructor","props","state","tasks","mountedComponent","componentDidMount","lastWeekDates","tasksFilteredResults","field","range","startDate","endDate","query","error","setState","data","today","Date","day","getDay","days","oneDayTime","twelveHours","componentWillUnmount","render","backgroundColor","pathname","color","fontSize","margin","textAlign","padding","span","offset","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Badge, Row, Col } from 'react-bootstrap';\nimport { IoMdArrowRoundBack as BackIcon } from 'react-icons/io';\nimport { NavLink } from 'react-router-dom';\n\nimport { getTasksFiltered } from '../services/getTasksFiltered';\n\nimport GraphicDraw from '../components/GraphicDraw';\nimport './css/Dashboard.css';\n\nclass Dashboard extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      tasks: []\n    };\n\n    this.mountedComponent = false;\n  }\n\n  async componentDidMount () {\n    this.mountedComponent = true;\n\n    const lastWeekDates = this.lastWeekDates();\n\n    const tasksFilteredResults = await getTasksFiltered({\n      field: 'finished_time',\n      range: [ lastWeekDates.startDate, lastWeekDates.endDate ],\n      query: {}\n    });\n    if (!tasksFilteredResults.error) {\n      this.setState({\n        ...this.state,\n        tasks: tasksFilteredResults.data,\n      });\n    }\n  }\n\n  lastWeekDates () {\n    // fecha actual\n    const today = new Date();\n    // dia de la semana extraida del objeto Date [Domingo(0) - lunes(6)]\n    const day = new Date().getDay() + 2;\n    // calculo cuantos dias quitarle a esta semana\n    const days = day > 7 ? 1 : day;\n    // calculo el viernes de la semana anterior\n    const oneDayTime = 1000 * 60 * 60 * 24;\n    const twelveHours = 1000 * 60 * 60 * 12;\n    // le sumo 6 hora para comparar en la base de datos con UTC\n    const endDate = new Date( today - ((oneDayTime - twelveHours) * (days)) );\n    // calculu su lunes\n    const startDate = new Date( endDate - ((oneDayTime + twelveHours) * 4) );\n\n    return { startDate, endDate };\n  }\n\n  componentWillUnmount () {\n    this.mountedComponent = false;\n  }\n\n  render () {\n    return (\n      <div>\n        <Container fluid>\n          <Row>\n            <Col style={{ backgroundColor: '#333' }}>\n              <NavLink to={{ pathname: '/' }}>\n                <BackIcon style={{ color: 'white', fontSize: '30px', margin: '7px' }} />\n              </NavLink>\n            </Col>\n          </Row>\n          <Row>\n            <Col xs={12}>\n              <h2 style={{ textAlign: 'center', padding: '3px' }}>Tareas de la ultima semana</h2>\n            </Col>\n            <Col xs={12} style={{ textAlign: 'center', padding: '3px' }}>\n              <Badge style={{ backgroundColor: 'teal', color: 'white', margin: '3px 0' }}>\n                <h6 style={{ textAlign: 'center', padding: '5px', margin: '0' }}>Tareas completadas</h6>\n              </Badge>{' '}\n              <Badge style={{ backgroundColor: 'lightcoral', color: 'white', margin: '3px 0' }}>\n                <h6 style={{ textAlign: 'center', padding: '5px', margin: 0 }}>Total de tareas completadas restantes</h6>\n              </Badge>{' '}\n            </Col>\n          </Row>\n          <Row>\n            <Col xs={{ span: 10, offset: 1 }} sm={{ span: 8, offset: 2 }} md={{ span: 6, offset: 3 }}>\n              {this.state.tasks.length > 0 && (\n                <GraphicDraw tasks={this.state.tasks} />\n              )}\n              {this.state.tasks.length < 1 && (\n                <h2 style={{ textAlign: 'center', padding: '3px' }}>No hay tareas terminadas en la ultima semana</h2>\n              )}\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}